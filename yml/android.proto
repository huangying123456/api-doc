syntax = "proto3";

import "google/protobuf/empty.proto";

package _app;

message GetCustomerDetailRequest {
    // 客户Id
    int64 customerId = 1;
}

message GetCustomerEvaluationTasksRequest {
    // 客户Id
    int64 customerId = 1;
}

message GetCustomerHealthDocumentRequest {
    // 客户Id
    int64 customerId = 1;
}

message GetCustomerNursingTasksRequest {
    // 客户Id
    int64 customerId = 1;
}

message GetDepartmentListRequest {
    // 客户Id
    int32 customerId = 1;
    // 机构人员Id
    int32 specialistId = 2;
}

message PhoneCaptchaLoginRequest {
    // 手机验证码登录
    // 请求结构见PhoneCaptchaOption
    PhoneCaptchaOption body = 1;
}

message GetPhoneCaptchaRequest {
    // 获取手机验证码请求 这里只需提供手机号
    // 请求结构见PhoneCaptchaOption
    PhoneCaptchaOption body = 1;
}

message GetOrderDetailRequest {
    // 订单Id
    int64 orderId = 1;
}

message GetScheduleRequest {
    // 查询日期时间戳
    int32 startTime = 1;
}

message GetScheduleCalenderRequest {
    // 结束时间
    int32 endTime = 1;
    // 开始时间
    int32 startTime = 2;
}

message AddNursingTasksRequest {
    // 护理任务更新
    AddNursingTaskOption body = 1;
}

message GetNursingTaskByIdRequest {
    // 任务Id
    int64 taskId = 1;
}

message AddNursingTaskOption {
    // 客户信息id
    int32 customerProfileId = 1;
    // 机构id
    int32 departmentId = 2;
    // 服务结束时间
    int32 endServiceTime = 3;
    // 备注
    string remark = 4;
    // 服务项目id数组
    repeated int32 serviceItems = 5;
    // 服务开始时间
    int32 startServiceTime = 6;
}

message ColleagueDTO {
    // 同事列表
    message Data {
        repeated DepartmentColleagueItem departmentColleague = 1;
    }
    Data data = 1;
    Result result = 2;
}

message ColleagueImItem {
    // 头像
    string avatarUrl = 1;
    // id
    int64 id = 2;
    // 姓名
    string name = 3;
}

message CustomerDetailDTO {
    // 客户详情
    message Data {
        repeated CustomerProfileDetail customerProfileGroup = 1;
    }
    Data data = 1;
    Result result = 2;
}

message CustomerListDTO {
    // 客户列表数据列表
    message Data {
        repeated CustomerProfileNameGroup customerProfileGroup = 1;
    }
    Data data = 1;
    Result result = 2;
}

message CustomerProfileBasicInfo {
    // 头像uri
    string avatarUrl = 1;
    // 客户id
    int64 id = 2;
    // 客户姓名
    string name = 3;
    // 联系电话
    string phone = 4;
}

message CustomerProfileDetail {
    CustomerProfileBasicInfo basicInfo = 1;
    // 健康档案信息
    repeated CustomerProfileHealthInfoItem healthInfo = 2;
    ImAccount imAccount = 3;
}

message CustomerProfileHealthInfoDTO {
    // 订单详情数据
    message Data {
        // 健康档案信息
    repeated CustomerProfileHealthInfoItem healthInfo = 1;
    }
    Data data = 1;
    Result result = 2;
}

message CustomerProfileHealthInfoItem {
    // 内容
    string content = 1;
    // 信息标题
    enum CustomerProfileHealthInfoItem_Title {
        CUSTOMERPROFILEHEALTHINFOITEM_TITLE_疾病史 = 0;
        CUSTOMERPROFILEHEALTHINFOITEM_TITLE_用药史 = 1;
        CUSTOMERPROFILEHEALTHINFOITEM_TITLE_过敏史 = 2;
        CUSTOMERPROFILEHEALTHINFOITEM_TITLE_手术史 = 3;
    }
    CustomerProfileHealthInfoItem_Title title = 2;
}

message CustomerProfileNameGroup {
    repeated CustomerProfileBasicInfo CustomerProfileInfo = 1;
    // 首字母
    string NameGroupPrefix = 2;
}

message Department {
    // 机构地址
    string address = 1;
    // 机构图标地址
    string avatarUrl = 2;
    // 机构Id
    int64 id = 3;
    // 机构简介
    string introduction = 4;
    // 机构名称
    string name = 5;
    // 机构类型
    int32 type = 6;
    // 机构类型名称（显示用）
    string typeName = 7;
}

message DepartmentColleagueItem {
    // 同事聊天项
    repeated ColleagueImItem colleagueIm = 1;
    // 同事数
    int64 colleagueNumber = 2;
    // 机构名称
    string departmentName = 3;
}

message DepartmentDashboardDTO {
    // 工作台
    message Data {
        repeated DepartmentFeature feature = 1;
    }
    Data data = 1;
    Result result = 2;
}

message DepartmentFeature {
    // 功能标识（标识作用）
    string feature = 1;
    // 功能图标
    string iconUrl = 2;
    // 功能名称
    string name = 3;
}

message DepartmentListDTO {
    // 机构列表数据
    message Data {
        repeated Department department = 1;
    }
    Data data = 1;
    Result result = 2;
}

message EvaluationKit {
    // 服务套件id
    int32 id = 1;
    // 服务套件名称
    string name = 2;
    // 服务唯一标识
    string uuid = 3;
}

message EvaluationKitListDTO {
    // 护理任务列表
    message Data {
        repeated EvaluationKit evaluationKit = 1;
    }
    Data data = 1;
    Result result = 2;
}

message EvaluationTask {
    // 套件名称
    string evaluationKitName = 1;
    // 任务Id
    int64 id = 2;
    // 任务编号
    string no = 3;
    // 订单Id
    int64 orderId = 4;
    // 状态名称
    enum EvaluationTask_StateName {
        EVALUATIONTASK_STATENAME_已完成 = 0;
        EVALUATIONTASK_STATENAME_已取消 = 1;
        EVALUATIONTASK_STATENAME_待完成 = 2;
    }
    EvaluationTask_StateName stateName = 5;
    // 任务地址
    string taskAddress = 6;
    // 任务时间（任务分派时间）
    int64 taskAssignmentTime = 7;
    // 任务时间
    int64 taskExecutionTime = 8;
}

message EvaluationTaskListDTO {
    // 评估任务列表
    message Data {
        repeated EvaluationTask evaluationTask = 1;
    }
    Data data = 1;
    Result result = 2;
}

message ImAccount {
    // im用identifier
    string identifier = 1;
    // im头像Url 仅与对方聊天时使用
    string imAvatarUrl = 2;
    // im用名字 仅与对方聊天时使用
    string imName = 3;
    // im用signature 仅知道自己的
    string signature = 4;
}

message LoginResultDTO {
    // 登录结果
    message Data {
        ImAccount ImAccount = 1;
        message LoginResult {
            // 使用者id
    int64 id = 1;
            // 登录后token
    string token = 2;
        }
        LoginResult loginResult = 2;
    }
    Data data = 1;
    Result result = 2;
}

message MessageFeature {
    // 是否有新消息
    string hasNew = 1;
    // 图标地址
    string iconUrl = 2;
    // 功能名字
    enum MessageFeature_Name {
        MESSAGEFEATURE_NAME_工作日程 = 0;
        MESSAGEFEATURE_NAME_通知中心 = 1;
        MESSAGEFEATURE_NAME_公告 = 2;
    }
    MessageFeature_Name name = 3;
}

message MessageFeatureDTO {
    // 机构列表数据
    message Data {
        repeated MessageFeature messageFeature = 1;
    }
    Data data = 1;
    Result result = 2;
}

message NursingTask {
    // 任务Id
    int64 id = 1;
    // 任务编号
    string no = 2;
    // 订单Id
    int64 orderId = 3;
    // 状态名称
    enum NursingTask_StateName {
        NURSINGTASK_STATENAME_已完成 = 0;
        NURSINGTASK_STATENAME_已取消 = 1;
        NURSINGTASK_STATENAME_待完成 = 2;
    }
    NursingTask_StateName stateName = 4;
    // 任务地址
    string taskAddress = 5;
    // 任务时间（任务分派时间）
    int64 taskAssignmentTime = 6;
    // 任务时间
    int64 taskExecutionTime = 7;
}

message NursingTaskDetail {
    // 创建机构名称
    string departmentName = 1;
    // 服务结束时间(时间戳毫秒)
    int64 endServiceTime = 2;
    // 执行人
    string executeSpecialist = 3;
    repeated string nursingTaskAction = 4;
    NursingTask nursingTaskInfo = 5;
    // 备注
    string remark = 6;
    // 服务开始时间(时间戳毫秒)
    int64 startServiceTime = 7;
}

message NursingTaskDetailDTO {
    // 护理任务列表
    message Data {
        NursingTaskDetail nursingTaskDetail = 1;
    }
    Data data = 1;
    Result result = 2;
}

message NursingTaskListDTO {
    // 护理任务列表
    message Data {
        repeated NursingTask nursingTask = 1;
    }
    Data data = 1;
    Result result = 2;
}

message OrderDetail {
    CustomerProfileInfo customerProfileInfo = 1;
    // 订单id
    int64 id = 2;
    // 服务项目简介
    int32 introduction = 3;
    string name = 4;
    // 订单编号
    string no = 5;
    // 价格（以分为单位）
    int32 price = 6;
    // 服务项目图片Url
    string serviceItemImageUrl = 7;
    // 状态名称
    enum OrderDetail_StateName {
        ORDERDETAIL_STATENAME_已完成 = 0;
        ORDERDETAIL_STATENAME_已取消 = 1;
        ORDERDETAIL_STATENAME_待完成 = 2;
    }
    OrderDetail_StateName stateName = 8;
}

message OrderDetailDTO {
    // 订单详情数据
    message Data {
        OrderDetail orderDetail = 1;
    }
    Data data = 1;
    Result result = 2;
}

message PhoneCaptchaOption {
    // 验证码
    string captcha = 1;
    // 手机号
    string phone = 2;
}

message Result {
    // 成功时为0 其他时为状态码 可用于状态记录
    int32 code = 1;
    // 显示消息 用于前端或客户端显示
    string displayMsg = 2;
    // 消息 可用于log记录
    string msg = 3;
    // 是否成功
    bool success = 4;
}

message ScheduleCalenderDTO {
    // 机构列表数据
    message Data {
        Result result = 1;
        repeated int64 scheduleMarkTime = 2;
    }
    Data data = 1;
}

message ScheduleItem {
    // 日程名称
    string scheduleName = 1;
    // 日程类型
    enum ScheduleItem_ScheduleType {
        SCHEDULEITEM_SCHEDULETYPE_EVALUATIONTASKS = 0;
        SCHEDULEITEM_SCHEDULETYPE_NURSINGTASKS = 1;
    }
    ScheduleItem_ScheduleType scheduleType = 2;
    // 日程类型名字
    enum ScheduleItem_ScheduleTypeName {
        SCHEDULEITEM_SCHEDULETYPENAME_评估任务 = 0;
        SCHEDULEITEM_SCHEDULETYPENAME_护理任务 = 1;
        SCHEDULEITEM_SCHEDULETYPENAME_排班 = 2;
    }
    ScheduleItem_ScheduleTypeName scheduleTypeName = 3;
    // 状态名称
    enum ScheduleItem_StateName {
        SCHEDULEITEM_STATENAME_已完成 = 0;
        SCHEDULEITEM_STATENAME_未完成 = 1;
    }
    ScheduleItem_StateName stateName = 4;
}

message ScheduleListDTO {
    // 机构列表数据
    message Data {
        repeated ScheduleItem schedule = 1;
    }
    Data data = 1;
    Result result = 2;
}

message ServiceItem {
    // 服务项目id
    int64 id = 1;
    // 服务项目名称
    string name = 2;
}

message ServiceItemListDTO {
    // 服务项目列表
    message Data {
        repeated ServiceItemListItem serviceList = 1;
    }
    Data data = 1;
    Result result = 2;
}

message ServiceItemListItem {
    // 支付方类型
    enum ServiceItemListItem_PayerTypeName {
        SERVICEITEMLISTITEM_PAYERTYPENAME_长护险项目 = 0;
        SERVICEITEMLISTITEM_PAYERTYPENAME_自费项目 = 1;
    }
    ServiceItemListItem_PayerTypeName payerTypeName = 1;
    // 服务类型分组
    repeated ServiceTypeGroupItem serviceTypeGroup = 2;
}

message ServiceTypeGroupItem {
    // 服务列表
    repeated ServiceItem serviceItem = 1;
    // 服务类型
    enum ServiceTypeGroupItem_ServiceTypeName {
        SERVICETYPEGROUPITEM_SERVICETYPENAME_医疗护理 = 0;
        SERVICETYPEGROUPITEM_SERVICETYPENAME_生活照料 = 1;
    }
    ServiceTypeGroupItem_ServiceTypeName serviceTypeName = 2;
}

message SimpleResponse {
    Result result = 1;
}

message SpecialistBasicInfo {
    // 年龄显示以此字段为准
    int32 age = 1;
    // 姓名
    string avatarUrl = 2;
    // 生日时间戳毫秒级
    int64 birthday = 3;
    // 用户机构id
    int32 departmentId = 4;
    // 机构角色（机构职称）列表
    repeated SpecialistDepartmentTitle departmentTitle = 5;
    // 性别 男1 女0
    int32 gender = 6;
    // 用户id
    int64 id = 7;
    // 姓名
    string name = 8;
    // 用户平台id
    int64 platformId = 9;
    // 个人二维码
    string qrCode = 10;
}

message SpecialistDepartmentTitle {
    // 机构id
    int32 departmentId = 1;
    // 机构名称
    string departmentName = 2;
    // 职称名称
    string titleName = 3;
}

message SpecialistInfoDTO {
    // Specialist信息
    message Data {
        SpecialistBasicInfo basicInfo = 1;
        // Specialist机构信息
    repeated Department department = 2;
    }
    Data data = 1;
    Result result = 2;
}

message TaskPushMessage {
    // 任务id
    int32 id = 1;
    // 名称
    string name = 2;
    // 任务地点
    int64 taskAddress = 3;
    // 任务结束时间
    int64 taskEndTime = 4;
    // 任务开始时间
    int64 taskStartTime = 5;
    // 标题
    string title = 6;
}

message UpdateNursingTaskOption {
    // 服务结束时间
    int32 endServiceTime = 1;
    // 备注
    string remark = 2;
    // 服务开始时间
    int32 startServiceTime = 3;
}

service _AppService {
    // 客户列表 
    // 1-6护理任务/8 1-2-1
    rpc GetAllCustomers(google.protobuf.Empty) returns (CustomerListDTO) {}
    // 客户详情 
    // 1-2-2
    rpc GetCustomerDetail(GetCustomerDetailRequest) returns (CustomerDetailDTO) {}
    // 客户评估信息 
    // 1-2-5
    rpc GetCustomerEvaluationTasks(GetCustomerEvaluationTasksRequest) returns (EvaluationTaskListDTO) {}
    // 客户详情 
    // 1-2-6
    rpc GetCustomerHealthDocument(GetCustomerHealthDocumentRequest) returns (CustomerProfileHealthInfoDTO) {}
    // 客户服务信息 
    // 1-2-7
    rpc GetCustomerNursingTasks(GetCustomerNursingTasksRequest) returns (NursingTaskListDTO) {}
    // 根据机构人员id和客户id获取机构id 1-6护理任务/9
    rpc GetDepartmentList(GetDepartmentListRequest) returns (DepartmentListDTO) {}
    // 手机验证码登录
    //  0-0登录/1-1登录
    rpc PhoneCaptchaLogin(PhoneCaptchaLoginRequest) returns (LoginResultDTO) {}
    // 发送获取手机验证码请求
    //  0-0登录/1-1登录
    rpc GetPhoneCaptcha(GetPhoneCaptchaRequest) returns (SimpleResponse) {}
    // 登出
    rpc Logout(google.protobuf.Empty) returns (SimpleResponse) {}
    // 消息页面
    rpc GetMessageFeatures(google.protobuf.Empty) returns (MessageFeatureDTO) {}
    // 护理任务列表
    // 1-6护理任务/7
    rpc GetOrderDetail(GetOrderDetailRequest) returns (OrderDetailDTO) {}
    // 护理任务列表
    // 1-1-3通知中心 此数据项非接口 仅展示通知中心数据的格式
    rpc PushContent(google.protobuf.Empty) returns (TaskPushMessage) {}
    // 工作日程页面
    rpc GetSchedule(GetScheduleRequest) returns (ScheduleListDTO) {}
    // 工作日程页面
    rpc GetScheduleCalender(GetScheduleCalenderRequest) returns (ScheduleCalenderDTO) {}
    // 同事沟通列表
    //  1-3工作台/1-10发起沟通
    rpc GetAllColleagues(google.protobuf.Empty) returns (ColleagueDTO) {}
    // 工作台首页
    //  1-3工作台
    rpc GetDashboard(google.protobuf.Empty) returns (DepartmentDashboardDTO) {}
    // 我的信息
    //  1-4我的
    rpc GetBasicInfo(google.protobuf.Empty) returns (SpecialistInfoDTO) {}
    // 护理任务列表 
    // 1-5评估任务 1～2
    rpc GetAllEvaluationKits(google.protobuf.Empty) returns (EvaluationKitListDTO) {}
    // 护理任务列表 
    // 1-5评估任务 1～2
    rpc GetAllEvaluationTasks(google.protobuf.Empty) returns (EvaluationTaskListDTO) {}
    // 护理任务列表 
    // 1-6护理任务 1～2
    rpc GetAllNursingTasks(google.protobuf.Empty) returns (NursingTaskListDTO) {}
    // 护理任务列表 
    // 1-6护理任务 10完成
    rpc AddNursingTasks(AddNursingTasksRequest) returns (SimpleResponse) {}
    // 护理任务列表 
    // 1-6护理任务/4~6
    rpc GetNursingTaskById(GetNursingTaskByIdRequest) returns (NursingTaskDetailDTO) {}
    // 服务项目 1-6-10记录信息 获取服务项目列表
    rpc GetAllServiceItems(google.protobuf.Empty) returns (ServiceItemListDTO) {}
}
